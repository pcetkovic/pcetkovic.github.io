<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Liquidity Distribution AT</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark-d166b450ba5a8e9f7a0ab969bf6592c1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-da61baa9e317dd3d9ad49a148ae3d66f.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<meta name="quarto:status" content="draft">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../tracker.html"> 
<span class="menu-text">Tracker</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../forecasting.html"> 
<span class="menu-text">Forecasts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../finsyst.html"> 
<span class="menu-text">Financial Systems</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Liquidity Distribution AT</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cr-section">
<section id="liquidity-distribution-early-draft" class="level1" data-focus-on="cr-main-plot">
<h1>Liquidity Distribution [early draft]</h1>
</section>
<p>Blablabla</p>
<div data-focus-on="cr-main-plot" data-pan-to="160%,160%" data-scale-by="5.0">
<p>From the beginning of 2015 until the end of 2018, reserves creation was mainly determined by the OeNB’s <span style="color:#508080;">securities</span> <span style="background-color:#508080;">purchases</span>, with refinancing operations playing a less prominent role. The newly created liquidity has been partly withdrawn form balance sheets of commercial banks by volatile changes in Target2-liabilities as well as a brief increase in banknotes in circulation.</p>
</div>
<div data-focus-on="cr-main-plot" data-pan-to="50%,160%" data-scale-by="5.0">
<p>With the outbreak of the pandemic, the OeNB started to activate its assets purchases again, but this time refinancing operations in form of TLTROs increased also considerably. Liquidity was withdrawn again by T2-liabilities and banknotes in circulation, but deposits which the Austrian government held at the OeNB played also an important role. Reserves thus increased less than the liquidity injecting operations would imply.</p>
<p>With the change in monetary policy and the expiration of TLTRO tranches, mechanisms started to change. The drop in TLTROS in the final quarter of 2022 led to a drop in reserves. However, afterwards reserves did not decrease significantly. This was the result of two compensating mechanisms. First, government deposits at the OeNB fell to a low level. Second, Intra-EA-claims show an incraesing trend leading to an increase in reserves, though increasing Intra-EA-liabilities partly compensated this development. The decline in monetary policy related securities has been very slow and did not significantly contribute to the evolution of reserves. Overall, these channels caused the banks’ reserves to fall less sharply than the isolated decline in liquidity-increasing positions would suggest.</p>
</div>
<div data-focus-on="cr-main-plot" data-pan-to="160%,20%" data-scale-by="5.0">
<p>On the balance of payments side, it can be seen that the pre-pandemic period was characterized by an inflow of funds from the cumulative current account surpluses. In terms of direct investment, there was a decline in both assets and liabilities, although the trend was characterized by volatility. As the balance of direct investment was balanced, this functional category had hardly any influence on payment flows. Portfolio investments on the liabilities side developed in a U-shape, with a decline followed by an increase. On the receivables side, however, portfolio investments show a consistently rising trend. This means that the development of the balance in this functional category has led to an outflow of cash. The OeNB’s liabilities in the form of deposits vis-à-vis other countries increased during this period, which reflects the increase in the Target2 liability. This also means that due to the transactions of the Austrian economy with other countries, more cash flowed out than in.</p>
</div>
<div data-focus-on="cr-main-plot" data-pan-to="50%,20%" data-scale-by="5.0">
<p>The pandemic period was initially characterized by stagnation in the current account balance, followed by an increase. Direct investment assets rose and the increase was somewhat stronger than that of direct investment liabilities. Portfolio investment also saw an increase in both assets and liabilities. These developments indicate that payments to other countries were higher than payments to the domestic market, which can also be seen in the development of the Target2 liability, but also in the banks’ net claims in the form of deposits.</p>
<p>The development of Target2 liabilities and the banks’ net deposit claims has visibly increased with the turnaround in monetary policy. At the same time, the increase in intra-eurozone claims is clearly visible on the OeNB side. There was also an inflow of cash and cash equivalents due to a sharp rise in the current account balance. Portfolio investments abroad rose visibly, but still lagged behind the increase in foreign portfolio investments at home.</p>
</div>
<div data-focus-on="cr-main-plot" data-pan-to="160%,-140%" data-scale-by="5.0">
<p>The aggregated balance sheet of the banking sector shows an increase in reserves held at the oeNB on the assets side at the beginning of the period under review, with a simultaneous increase in net receivables from interest-bearing securities. However, the latter then fell from the end of 2017 until the outbreak of the pandemic. On the liabilities side, the development was mainly characterized by an increase in deposits from domestic non-financial sectors. It can also be seen that these deposits increased more strongly than loans to domestic non-financial sectors. It can therefore be deduced that deposits generated abroad have also flowed into the accounts of domestic non-financial sectors, for example through real economic transactions with other countries. Finally, it can also be seen that loans from domestic banks to non-financial sectors in the rest of the eurozone have increased more than deposits from these sectors at domestic banks.</p>
</div>
<div data-focus-on="cr-main-plot" data-pan-to="50%,-140%" data-scale-by="5.0">
<p>In the banking sector, the pandemic period was characterized by an increase in lending to domestic non-financial sectors. In contrast to the previous period, loans developed at a similar rate to deposits from these sectors. On the assets and liabilities side, the operations of the OeNB and the Eurosystem were reflected in an increase in reserves and credit lines to the OeNB on the liabilities side.</p>
<p>With the turnaround in monetary policy, loans then stagnated and deposits hardly increased at all. This period was characterized by the expiry of refinancing operations. On the assets side, reserves fell, but to a lesser extent than the decline in credit lines would suggest. One significant development in this period is the relatively sharp decline in net receivables from interest-bearing securities.</p>
</div>
<div id="cr-main-plot" class="scale-to-fill">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="index_files/figure-html/main-plot-1.svg" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<!-- ::: {#cr-ilm1-plot} -->
<!-- ```{r} -->
<!-- #| label: ilm1-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- pltIlm1 <- ilm1_plot() -->
<!-- pltIlm1 + scale_alpha_manual(values = rep(1, 21), guide = guide_none()) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {#cr-ilm1-de-plot} -->
<!-- ```{r} -->
<!-- #| label: ilm1-de-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- pltIlm1 + scale_alpha_manual(values = c("DE"=1.0, "4F"=0.2, "AT"=0.2, "BE"=0.2, "CY"=0.2, "EE"=0.2, "ES"=0.2, "FI"=0.2, "FR"=0.2, "GR"=0.2, "HR"=0.2, "IE"=0.2, "IT"=0.2, "LT"=0.2, "LU"=0.2, "LV"=0.2, "MT"=0.2, "NL"=0.2, "PT"=0.2, "SI"=0.2, "SK"=0.2), guide = guide_none()) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {#cr-ilm1-it-plot} -->
<!-- ```{r} -->
<!-- #| label: ilm1-it-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- pltIlm1 + scale_alpha_manual(values = c("DE"=0.2, "4F"=0.2, "AT"=0.2, "BE"=0.2, "CY"=0.2, "EE"=0.2, "ES"=1.0, "FI"=0.2, "FR"=0.2, "GR"=0.2, "HR"=0.2, "IE"=0.2, "IT"=1.0, "LT"=0.2, "LU"=0.2, "LV"=0.2, "MT"=0.2, "NL"=0.2, "PT"=0.2, "SI"=0.2, "SK"=0.2), guide = guide_none()) -->
<!-- ``` -->
<!-- ::: -->
<!-- FIGURE S121 A F3 -->
<!-- Reserves of the Eurosystem have been created mainly by purchases of securities. Refinancing operations contributed to liquidity generation during the pandemic. A closer look on securities held by central banks shows that the major part belongs to debt securities issued by domestic governments. However, this does not mean that central banks have bought domestic government bonds only from resident holders. -->
<!-- FIGURE S121 A F2 -->
<!-- REFINANCING OPERATIONS. -->
<!-- @cr-ilm1-plot -->
<!-- Concerning total liquidity in the Eurosystem, most of the reserves have been created by the central banks of Germany, France, Italy and Spain. -->
<!-- @cr-ilm1-de-plot -->
<!-- The case of Germany shows that reserves evolved more or less along with liquidity injecting assets. However, parts of the reserves have flew in reflected in the evolution of Target2-assets. This mechanism has compensated the withdrawing mechanism of banknotes and other factors. -->
<!-- @cr-ilm1-it-plot -->
<!-- By contrast, a high fraction of reserves which have been created by the Banca d Italia and the Banca de Spain flew out of these countries, reflected in their Target2-liabilities. -->
<!-- Banknotes in circulation have been issued mainly by the central banks of Germany, France, Italy and Spain. -->
<!-- Intra-EA positions show an increasing trend in Spain and to a lesser extent in France until the turn in monetary policy. Afterwards the item stagnated in these two countries while it has been increasing in Austria, as has already been shown. -->
<!-- The ECB is s special case. Banknotes in circulation are also allocated to the ECB according to the KEY and recorded as liabilities in its balance sheet. However, in practice the ECB does not issue banknotes, so the item Banknotes in circulation from its liabilities has to be matched by an item on the asset side to an equal amount. This item is BANKNOTES ALLOCATED. -->
<!-- Intra-EA liabilities almost totally relate to Germany, although Luxembourg has also a significant contribution taking its size into account. GERMANY. The data for Luxembourg show that banknote allocation have not increased in the period under consideration. The high stock for this item stems from the yaers before 2015 where Luxembourg had a much higher issuance of banknotes (mainly 500 EUR banknotes) than its contribution according to the allocation key would suggest. -->
<!-- ::: -->
<!-- ::: cr-section -->
<!-- ::: {#cr-bps1-plot} -->
<!-- ```{r} -->
<!-- #| label: bps1-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- bps1_plot() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {#cr-bps2-plot} -->
<!-- ```{r} -->
<!-- #| label: bps2-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- bps2_plot() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {#cr-bps3-plot} -->
<!-- ```{r} -->
<!-- #| label: bps3-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- bps3_plot() -->
<!-- ``` -->
<!-- ::: -->
<!-- @cr-bps1-plot -->
<!-- Austrian current account has been mainly driven by a surplus in the Services sector, with tourism playing the major role. TOURISM BY COUNTRY. LINK TO BANKNOTES AND TARGET. -->
<!-- @cr-bps2-plot -->
<!-- Direct Investment was mainly determined by SPEs prior to the pandemic. The evolution of SPEs on was equally on asset as well as liability side as is required by definition, since these entities only hold foreign items on both sides of the balance sheet. Afterwards it was ADI on asset side and PDI on liabilities side, with the former showing a faster increase, which led to a surplus in net Foreign Direct Investment. Another view on Direct investment shows that equity was the main determinant with a decrease followed by an increase with the outbreak of the pandemic for both assets and liabilities. LINK TO TARGET. -->
<!-- @cr-bps3-plot -->
<!-- The view on components of portfolio investment assets shows that the increasing trend can be attributed to many items. Debt securities holdings of credit institutions decreased until the early 2018, and increased afterwards. Debt securities liabilities of banks show a similar pattern although with higher magnitudes. Other items which shaped portfolio investment liabilities have been debt securities of the government sector, showing a decrease until the outbreak of the pandemic, followed by an increasing trend. LINK TO TARGET. -->
<!-- ::: -->
<!-- ::: cr-section -->
<!-- ::: {#cr-bsi1-plot} -->
<!-- ```{r} -->
<!-- #| label: bsi1-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- bsi1_plot() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {#cr-bsi2-plot} -->
<!-- ```{r} -->
<!-- #| label: bsi2-plot -->
<!-- #| fig-width: 8 -->
<!-- #| fig-height: 6 -->
<!-- #| fig-align: center -->
<!-- #| #|fig-dpi:150 -->
<!-- bsi2_plot() -->
<!-- ``` -->
<!-- ::: -->
<!-- @cr-bsi1-plot -->
<!-- The composition of deposits of domestic non-MFI-sectors does not allow an insight about the evolution of government deposits from publicly available BSI-data. Such an information would provide insight whether increasing government deposits at the central bank had been withdrawn from accounts at commercial banks. -->
<!-- QSA DATA. GOVERNMENT DEPOSITS BY COUNTERPART. -->
<!-- @cr-bsi2-plot -->
<!-- Banks# holdings of debt securities issued by non-domestic EA-residents shows a similar pattern as in the case of portfolio investment. In the period before the outbreak of the pandemic holdings of debt securities issued by domestic sectors impacted total holdings stronger than those issued by other EA-residents. In particular, the amount of debt securities issued by the domestic government had decreased by a large amount. The pace slowed with the outbreak of the pandemic and stagnated with the turn in monetary policy. The evolution of debt securities liabilities of credit institutions shows a similar pattern to the corresponding item in portfolio investment liabilities. However, the difference is that the latter includes all foreign countries as counterparts while BSI-data shows domestic sectors and other EA-residents as counterparts. -->
<!-- QSA DATA. GOVERNMENT F3 LIABS BY COUNTERPART. -->
<!-- INTERACTION WITH HOLDINGS BY OENB AND ISSUANCE OF NEW DEBT SECURITIES BY GOVERNMENT. -->
<!-- QSA DATA. S122 ADDITIONAL INFORMATION. -->
<!-- ::: -->



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Powered by <a href="https://quarto.org">Quarto</a>.</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>